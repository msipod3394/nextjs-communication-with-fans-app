# 目黒さんレビュー

## DB 編

DB 構造自体に致命的な点が多そうです。
状態を update で更新しようとしているので、もし障害などが発生して「ユーザーがいつ決済しましたか」聞かれた際にいつ誰が更新をしたかが追うことができない形になっています。　
意外と WEB エンジニアの面接ではここを聞くことが多いかもしれません！！
特に目黒さんはフロントは問題そこまでないので、面接官はハードルを上げてここまで聞いてくることが多いかもです

DB の基礎として正規化というのがあり第三正規化までは最低限抑えた方が良いです

https://qiita.com/178_c_m/items/9440ff96f74d2db666df

また現状トレンド的にはイミュータブル DB 構造というのが流行っていてここも抑えとくと good です。
簡単に説明すると update を禁じて全てインサートで状態を管理しようというもので、過去のデータ変化を全て DB にとって置けるので後から追えるのがメリットですし、
ビックデータとしても活用できるので流行っています！今回のとことで言うとサブスクの状態はイミュータブルにしたほうが良いかもです。簡単に作ったのが下記です（実際はステータス更新に update を使ってう形にしてしまっていますが）
https://dbdiagram.io/d/66c2006b8b4bb5230e68429a

あと自分の写真集のサイトも基本イミュータブルに寄せているので少し参考になるかもです
https://dbdiagram.io/d/662d7d9b5b24a634d0f8b513

ただ DB 構造としてテーブル数はかなり増えるので把握はしにくくなるので難易度少し高めです！(自分も意外となんとなくなところあります)

## 全体構成

全体的に現状人気のライブラリーとかを使っているし、選定理由もしっかりしているので問題ないかと思います！！
あとは経験値でこんなのもあるんだと言うのが増えてくればより楽できることがいろいろあるかもです！

例えば router の path 指定の際に`router.push("/auth/login");`と書いていますが、ここの path で typo をした場合見落とし図らく 404 になるケースがよくあります。
`pathpida`というライブラリーを使えば勝手に path を cont として書き出してくれるので
`router.push(pagesPath.home.$url().path);`このように型安全に欠けるのでミスが減るかもです。

あとは参考程度にですが、現状サイトの path を決める際になんとなく決めているかもですが SEO 的には正解が実はあって
構造化 URL と言うのがあり頭の片隅においておくと良いかもです!(ただここは SEO 専門の人がいれば相談しながら決めるのが良いと思います！)

https://ferret-one.com/blog/structured-data

## UI の書き方

ここは特に違和感なかったです！

## 処理形

form などの処理は hook に書き出されているし全体的に UI と機能の分割ができていて良さそう！

## API について

Next のバックエンドの処理を API に書くのは SEO 的な有意な部分ももちろんありますが、
一方開発者としては機能の分割をしてデバッグをしやすくしたり開発の分担をしやすくする効果もあります。
その中で重要になってくるのがテストです！今回時間がなくて実装から外したと思うのですが、おそらく今後どの現場でも API の作成の場合同時にテストを書くことが多いです！
テストを書いておけばエラーの場合や成功の場合の出し分けなどもテスト記載できるので、
今回どの範囲まで例外処理を入れればいいか迷っている感じがしているので、テストの際にそこを考えることでより洗練したコードになる気がしました！！

これは好みですが、エラーレスポンスは日本語で書いて上げて(ほとんど日本語で書いてありましたが)共通の処理でエラーが返ってきたらその内容をそのままトーストで出す処理を作っておくと便利かもです！！

## middleware

ここは特に問題ない気がします！

ここはサイト移行などの時に特に有効になってくる場所のなので、今回のような新規サイトだとログイン後のチェックぐらいでの遷移変更ぐらいでしか使われないのでそこまで気にしなくて良さそうかと

## 総評

2 週間で作ったことを考えればかなりレベルが高いと思います！
また様々な複合的な技術を使っているので(zot,supabase,approuter,CMS)高難易度な実装をしているのでかなり評価として高いと思います！

これで出来が悪いと言う型はおそらくいないですね！

ただやはり WEB エンジニアとしては DB 構造はかなり大事になってくるところなので、ここでのマイナスポイントをもらう可能性は大です！
やはりフロント技術は入れ替わりが激しいし星の数ほど開発手法があるので、面接のポイントはキャッチアップ能力があるかどうかを一番にみますここは目黒さん問題なしです！！

一方 DB 構造などは WEB の知識があるのかを確かめるのにわかりやす指標として聞けるのでここをさらに勉強すればかなり強いかと思いました！！
そのほかにも WEB 技術的な部分だと HTTP やサーバー構成について理解しているかなどのこともたまに聞いてくる、嫌な人がいるかもなのでそこも抑えておくといいかもです。
例えば

- ショッピングサイトを作る際にはどんな DB 構成にしますか？
- 一日は 100 万人が使うサイトを構成するならどのような構成でサーバーを組みますか？

などなど、どうしてもフロントの求人でも人で不足な業界なので他の領域もカバーできたら嬉しいなぁ〜と思って聞かれることがあるかもなので
この辺もさらって見ておくといいかもです。

ただ目黒さんの場合デザイナー的な部分を押さえているのでそこで問題ないのであまり聞かれないかも！
